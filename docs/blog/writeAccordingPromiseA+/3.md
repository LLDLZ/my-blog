# 手写 promise （ 三 ） Promise 部分 API 实现

## Promise.all
`Promise.all`方法用于将多个 `Promise` 实例，包装成一个新的 `Promise` 实例。
```js
const p = Promise.all([p1, p2, p3]);
```
`p` 的状态由 `p1、p2、p3` 决定，分成两种情况。
  - 只有 `p1、p2、p3` 的状态都变成 `fulfilled` ，`p` 的状态才会变成 `fulfilled` ，此时 `p1、p2、p3` 的返回值组成一个数组，传递给p的回调函数。
  - 只要 `p1、p2、p3` 之中有一个被 `rejected` ，`p` 的状态就变成 `rejected` ，此时第一个被 `reject` 的实例的返回值，会传递给 `p` 的回调函数。
### 案例
```js
let promise1 = Promise.resolve(1);
let promise2 = Promise.resolve(2);
let promise3 = Promise.reject(3);
let promises = [1, promise2, 3];

Promise.all(promises).then(
  (array) => {
    console.log("array", array);
  },
  (err) => {
      console.log("err", err);
  }
);
// array [ 1, 2, 3 ];

let promises2 = [1, promise2, promise3];

Promise.all(promises2).then(
  (array) => {
    console.log("array", array);
  },
  (err) => {
      console.log("err", err);
  }
);
// err 3

let promises2 = [promise3, promise2, 4];

Promise.all(promises2).then(
  (array) => {
    console.log("array", array);
  },
  (err) => {
      console.log("err", err);
  }
);
// err 3
```
### 实现
```js
MyPromise.all = (values) => {
  return new MyPromise((resolve, reject) => {
    if (Array.isArray(values)) {
      let resultArr = [];
      let count = 0;
      values.forEach((val, idx) => {
        Promise.resolve(val)
          .then((res) => {
            resultArr[idx] = res;
            count++;

            if (count === values.length) {
              resolve(resultArr);
            }
          })
          .catch((err) => {
            reject(err);
          });
      });
    } else {
      reject(new Error("Array Methods must be provided an Array"));
    }
  });
};
```
 
## Promise.catch
`cath` 方法其实就是 `then` 方法的语法糖
### 案例
```js
let p = new Promise((resolve, reject) => {
  reject(new Error("错喽 错喽"));
});

p.then((res) => {
  console.log("res", res);
}).catch((err) => {
  console.log("err", err);
});
// err Error: 错喽 错喽
```
### 实现
```js
class MyPromise{
    ...
    // mark then 方法的语法糖
    catch(errCallback) {
        return this.then(null, errCallback);
    }
}
...
```

## Promise.finall
### 案例
```js

```

### 实现
```js

```


## Promise.race
### 案例
```js

```

### 实现
```js

```


## Promise.any
### 案例
```js

```

### 实现
```js

```

